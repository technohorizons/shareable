review = function () {
    var a = "", b = "";
    initHandler = function () {
        var d = document.querySelector("script[data-baseUrl]");
        a = $(d).attr("data-baseUrl"), b = $(d).attr("data-review-param");
        var e = document.querySelector("script[data-action]"), g = ($(e).attr("data-action"), $("#review-form-btn")), h = $("<div>").attr({class: "review-form"});
        $(g).append(h), addUserReviewBtn(), c();
        var i = $("#review-list-btn"), j = $("<div>").attr({class: "review-list"});
        $(i).append(j), addSeeReviewBtn(), loadReviews()
    }, addUserReviewBtn = function () {
        var a = $("<input/>").attr({
            type: "button",
            id: "field",
            class: "btn btn-success",
            value: "REVIEW USER",
            onclick: "ShowForm()"
        });
        $(".review-form").append(a)
    }, addSeeReviewBtn = function () {
        var a = $("<input/>").attr({
            type: "button",
            id: "field",
            class: "btn btn-warning",
            value: "REVIEWS",
            onclick: "ShowReviewList()"
        });
        $(".review-list").append(a)
    }, ShowForm = function () {
        $("#user-review-modal").modal("show")
    };
    var c = function () {
        $.get(a + "/review/form", function (a) {
            $(".review-form").append(a.html)
        }, "json").done(function () {
            var c = $("#review-form");
            $("input[name=rating]", c).change(function () {
                fr = $("[name='rating']:checked", c).val(), $("button.rating-s").html("Rating: " + fr)
            }), $(".rating label", c).mouseover(function () {
                fr = $(this).data("rating"), $("button.rating-s").html("Rating: " + fr)
            }), $(".rating label", c).mouseleave(function () {
                $("[name='rating']:checked", c).val() > 0 ? (fr = $("[name='rating']:checked", c).val(), $("button.rating-s").html("Rating: " + fr)) : $("button.rating-s").html("Rating: ")
            }), c.submit(function () {
                var d = $("[name='comment']", c).val(), e = $("[name='rating']:checked", c).val();
                return "" == d ? ($("label.r-has-error").removeClass("r-hide").addClass("r-show"), !1) : ($("label.r-has-error").removeClass("r-show").addClass("r-hide"), $(".rs-loader").show(), $.post(a + "/review/add", {
                    comment: d,
                    star_rating: e,
                    to_user_id: b
                }, function (a) {
                    $(".rs-loader").hide(), "success" != a.status && alert("Something went wrong"), $(".fr-success-label").html("Thanks For Your Review!"), $("[name='comment']", c).val(""), $("[name='rating']", c).removeAttr("checked"), $("button.rating-s").html("Rating:"), $("#user-review-modal").on("hide.bs.modal", function (a) {
                        $(".fr-success-label").html("Add your Review")
                    })
                }, "json"), !1)
            })
        })
    };
    return loadReviews = function () {
    }, ShowReviewList = function () {
        $(".rl-loader").show();
        $(".review-list .user-modal").remove(), $.get(a + "/review/list/" + b, function (a) {
            $(".rl-loader").hide();
            $(".review-list").append(a.html), $("#user-review-list-modal").modal("show")
        }, "json")
    }, loadAssets = function () {
        $("<link/>", {rel: "stylesheet", type: "text/css", href: a + "/assets/css/review-style.css"}).appendTo("head")
    }, {
        init: function () {
            initHandler(), loadAssets()
        }
    }
}(), window.onload = function () {
    $(document).ready(function () {
        review.init()
    })
};